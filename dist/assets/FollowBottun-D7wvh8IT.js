import{S as Y,j as e,r,u as _,i as C,C as M,U as Z,V as J,_ as I,I as K,W as G,X as R,Y as D,Z as O,g as F,$ as U,a0 as ee,a1 as te,a2 as se,q as le,a3 as ae,L as ne,a4 as ie,a5 as re,a6 as ce,a7 as oe,a8 as de,a9 as me,aa as ue,ab as xe,ac as fe,ad as he}from"./index-I4z9NyRU.js";import{b as pe}from"./index.esm-DYndHKii.js";import{G as je}from"./index.esm-jE6jTrGb.js";function be(t){return Y({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#E65100",d:"M41,42H13c-2.2,0-4-1.8-4-4V18c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4v20C45,40.2,43.2,42,41,42z"}},{tag:"path",attr:{fill:"#F57C00",d:"M35,36H7c-2.2,0-4-1.8-4-4V12c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4v20C39,34.2,37.2,36,35,36z"}},{tag:"circle",attr:{fill:"#FFF9C4",cx:"30",cy:"16",r:"3"}},{tag:"polygon",attr:{fill:"#942A09",points:"17,17.9 8,31 26,31"}},{tag:"polygon",attr:{fill:"#BF360C",points:"28,23.5 22,31 34,31"}}]})(t)}const ge=()=>e.jsx("span",{className:"flex rounded-full h-5 w-5 border-[.2rem] border-t-ransparent border-l-transparent border-white animate-spin"}),_e=()=>{const[t,s]=r.useState(""),[a,l]=r.useState(""),[o,m]=r.useState(!1),u=_(),d=r.useRef(),i=C(c=>c.ui).loginUser;r.useEffect(()=>{function c(){const j=new URL(Object.assign({"../../assets/avatar/testImg.png":I})[`../../assets/avatar/${i&&i[0].avatar}`],import.meta.url).href,y=j.split("/").length,w=j.split("/")[y-1];w!=="undefined"&&s(j),w=="undefined"&&s(null)}c()},[i]);const h=c=>{c.preventDefault(),m(!0);const j="https://saeedwebdev.ir/i",y=i[0].id,w=d.current.text.value,L=0,S=new FormData;S.append("image",a);const v="https://saeedwebdev.ir/api/posts";async function A(){if(a){const N=await K(j,S);if(N){const k=N&&await G(v,y,w,N,L);if(k){u(R(k));const $=await D(v);u(O($)),m(!1)}}}if(!a){const k=await G(v,y,w,"",L);if(k){u(R(k));const $=await D(v);u(O($)),m(!1)}}}A()};return e.jsx("form",{enctype:"multipart/form-data",onSubmit:c=>h(c),ref:d,className:"flex justify-center w-full",children:e.jsxs("div",{className:"flex flex-col items-center justify-center w-full shadow-3xl rounded-[.6rem] max-w-[800px] bg-white",children:[e.jsxs("div",{className:"flex w-full md:p-4 px-[5%] py-2 md:gap-2 gap-1",children:[e.jsx("label",{htmlFor:"text",className:"md:max-w-[50px] max-w-[40px] md:h-[50px] h-[40px] bg-white rounded-full",children:e.jsx("img",{src:t||M,className:"md:max-w-[50px] max-w-[40px] md:h-[50px] h-[40px] object-cover rounded-full"})}),e.jsx("input",{type:"text",name:"text",id:"text",placeholder:"به چه چیری فکر میکنید ؟",className:"w-full pr-2 md:text-[1rem] text-[.9rem]"})]}),e.jsx("div",{className:"flex items-center justify-center w-full md:px-10 px-[5%]",children:e.jsxs("div",{className:"flex items-center justify-between w-full border-t-[2px] py-4 ",children:[e.jsxs("div",{className:"flex w-full md:gap-5 gap-2 [&>div>label]:flex [&>div>label]:gap-1 [&>div>input]:hidden [&>div>label>span]:flex [&>div>label>span]:items-center md:[&>div>label>span]:text-[1.1rem] [&>div>label>span]:text-clamp1 [&>div>label>span]:text-orange-600",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsxs("label",{htmlFor:"image",children:[e.jsx("span",{children:e.jsx(be,{})}),e.jsx("span",{children:"فیلم و عکس"})]}),e.jsx("input",{onChange:c=>l(c.target.files[0]),type:"file",name:"image",id:"image",accept:".jpg, .jpeg, .png"})]}),e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsxs("label",{htmlFor:"location",children:[e.jsx("span",{children:e.jsx(Z,{})}),e.jsx("span",{children:"مکان"})]}),e.jsx("input",{type:"location",name:"location",id:"location"})]}),e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsxs("label",{children:[e.jsx("span",{children:e.jsx(J,{})}),e.jsx("span",{children:"ها تگ"})]}),e.jsx("input",{type:"file",name:"image",id:"image"})]})]}),e.jsx("div",{className:"flex justify-end w-[30%]",children:e.jsxs("div",{className:"flex items-center bg-green-500 hover:bg-green-600 rounded-[.4rem] text-white font-semibold",children:[o&&e.jsx("span",{className:"md:pr-4 pr-[.7rem]",children:e.jsx(ge,{})}),e.jsx("input",{type:"submit",name:"submit",value:"اشتراک",className:"cursor-pointer md:py-2 py-[.4rem] md:px-4 px-[.7rem] md:text-[1rem] text-[.9rem]"})]})})]})})]})})},B=t=>F.get(t).then(({data:s})=>s).catch(s=>{console.log(s)}),we=(t,s,a)=>F.post(t,{post_id:s,user_id:a}).then(({data:l})=>l).catch(l=>{console.log(l)}),ve=t=>F.delete(t).then(({data:s})=>(console.log(s),s)).catch(s=>{console.log(s)}),q=t=>F.get(t).then(({data:s})=>s).catch(s=>{console.log(s)}),Ne=(t,s,a,l)=>F.post(t,{text:s,post_id:a,user_id:l}).then(({data:o})=>(console.log("data"),console.log(o),o)).catch(o=>{console.log(o)}),ye=({comment:t,loginUser:s,targetUser:a})=>{const[l,o]=r.useState(null),d=C(n=>n.ui).allLoginUsers.find(n=>n.id==t.user_id);return r.useEffect(()=>{function n(){const i=new URL(Object.assign({"../../../assets/avatar/testImg.png":I})[`../../../assets/avatar/${a&&a.avatar}`],import.meta.url).href,h=i.split("/").length,c=i.split("/")[h-1];c!=="undefined"&&o(i),c=="undefined"&&o(null)}n()},[a]),e.jsxs("div",{className:`flex ${t.user_id==s[0].id?"justify-end":"justify-start gap-2"} min-w-max`,children:[t.user_id!==s[0].id?e.jsx("div",{className:"w-[40px] h-[40px] ",children:e.jsx("img",{src:l||M,alt:"",className:"object-cover h-full w-full rounded-full"})}):e.jsx(e.Fragment,{}),e.jsxs("p",{className:`relative max-w-[22rem] px-3 py-2 rounded-[1.5rem] break-words ${t.user_id==s[0].id?"bg-blue-700 text-left text-white":"bg-gray-300"} overflow-visible`,children:[t.user_id==s[0].id&&e.jsx("span",{className:"absolute left-0 -top-4 text-black text-[.7rem] min-w-max",children:s[0]&&s[0].firstName+" "+s[0].lastName}),t.user_id!==s[0].id&&e.jsx("span",{className:"absolute right-3 -top-4 text-black text-[.7rem] min-w-max",children:d&&d.firstName+" "+d.lastName}),t.text]})]})},ke=({post:t})=>{const s=r.useRef(),[a,l]=r.useState(""),o=_(),u=C(n=>n.ui).loginUser,d=n=>{n.preventDefault(),l("");const i=s.current.text.value,h="https://saeedwebdev.ir/api/comments";async function c(){const j=await Ne(h,i,t.id,u[0].id);j&&o(se(j))}c()};return e.jsxs("form",{onSubmit:n=>d(n),ref:s,className:"relative flex items-center justify-center border-[2px] w-full h-11 rounded-full",children:[e.jsx("input",{onChange:n=>l(n.target.value),value:a,type:"text",name:"text",placeholder:"پیام ...",className:"h-full w-full rounded-full px-12"}),a?e.jsxs("div",{className:"absolute right-3 text-[1.5rem] text-blue-600",children:[e.jsx("label",{htmlFor:"submit",children:e.jsx(U,{})}),e.jsx("input",{type:"submit",id:"submit",className:"hidden"})]}):e.jsx("i",{className:"absolute right-3 text-[1.5rem]",children:e.jsx(ee,{})}),e.jsxs("div",{className:"absolute left-6 flex text-[1.5rem] gap-4",children:[e.jsx("i",{children:e.jsx(te,{})}),e.jsx("i",{children:e.jsx(je,{})})]})]})},Ce=({post:t,targetUser:s})=>{const[a,l]=r.useState([]),[o,m]=r.useState(!1),d=C(i=>i.ui).loginUser,n=_();return r.useEffect(()=>{m(!0);const i=`https://saeedwebdev.ir/api/comments/${t.id}`;async function h(){const c=await q(i);c&&(l(c),m(!1),n(ae(c))),c||m(!1)}h()},[]),e.jsx("div",{className:"relative flex items-start w-full h-full px-4",children:e.jsxs("div",{className:"sticky top-0 flex flex-col items-start justify-between w-full h-full border-t-2",children:[e.jsx("div",{className:"flex flex-col w-full gap-3 pt-4",children:o?e.jsx(le,{}):a[0]?a.map(i=>e.jsx(ye,{comment:i,loginUser:d,targetUser:s})):e.jsx("div",{className:"flex items-center justify-center font-medium",children:"هیچ نظری وجود ندارد"})}),e.jsx("div",{className:"sticky bottom-0 flex items-center justify-center w-full bg-bg-theme-body py-3",children:e.jsx(ke,{post:t})})]})})},Le=({post:t,handleSetComment:s,targetUser:a})=>e.jsx("div",{className:"fixed top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-gray-400/25 z-50 py-4 px-10 ",children:e.jsxs("div",{className:"flex flex-col w-full h-full max-h-[800px] max-w-[700px] bg-white overflow-y-scroll rounded-[.6rem]",children:[e.jsxs("header",{className:"sticky top-0 bg-white flex justify-center items-center w-full px-4 min-h-[70px] text-[1.3rem] gap-3 z-50 border-b-[1px]",children:[e.jsx("h1",{children:a&&a.firstName+" "+a.lastName}),e.jsx("div",{className:"absolute left-4",children:e.jsxs("button",{onClick:s,className:"relative flex items-center justify-center font-normal w-10 h-10 bg-gray-300 rounded-full hover:bg-bg-hover",children:[e.jsx("i",{className:"absolute w-[.1rem] h-5 rotate-45 bg-black"}),e.jsx("i",{className:"absolute w-5 h-[.1rem] rotate-45 bg-black"})]})})]}),e.jsx("div",{children:e.jsx(Ae,{post:t,edition:"comment",handleSetCommentCall:s})}),e.jsx("div",{className:"h-full bg-bg-theme-body",children:e.jsx(Ce,{post:t,targetUser:a})})]})}),Se=()=>{},Fe=({handleNotIntrest:t})=>e.jsx("div",{className:"fixed top-0 left-0 flex items-center justify-center w-screen h-screen bg-gray-700/50 z-50",children:e.jsxs("div",{className:"flex flex-col items-center justify-between w-[20rem] border-t-2 border-x-2 bg-white rounded-[1rem] [&>*:last-child]:rounded-b-[1rem] [&>*]:flex [&>*]:justify-center [&>*]:items-center [&>*]:w-full [&>*]:p-2 [&>*]:h-[48px] [&>*]:border-b-2 [&>*]:cursor-pointer",children:[e.jsx("button",{children:"Report"}),e.jsx("button",{children:"Add favorites"}),e.jsx("button",{children:"Go to posts"}),e.jsx("button",{children:"About this acount"}),e.jsx("button",{onClick:t,children:"Cancel"})]})}),Ae=({post:t,edition:s,handleSetCommentCall:a,targetUser:l})=>{const[o,m]=r.useState(null),[u,d]=r.useState(null),[n,i]=r.useState(!1),[h,c]=r.useState(!1),[j,y]=r.useState(!1),[w,L]=r.useState(""),[S,v]=r.useState(null),[A,N]=r.useState(null),k=_(),b=C(x=>x.ui).loginUser;r.useEffect(()=>{function x(){const p=new URL(Object.assign({"../../assets/avatar/testImg.png":I})[`../../assets/avatar/${l&&l.avatar}`],import.meta.url).href,f=p.split("/").length,P=p.split("/")[f-1];P!=="undefined"&&d(p),P=="undefined"&&d(null);const g=new URL(Object.assign({"../../assets/avatar/testImg.png":I})[`../../assets/avatar/${t&&t.media}`],import.meta.url).href,X=g.split("/").length,E=g.split("/")[X-1];E!=="undefined"&&m(g),E=="undefined"&&m(null)}x()},[l,t]),r.useEffect(()=>{async function x(){const p=`https://saeedwebdev.ir/api/likes/${b[0]&&b[0].id}=${t.id}`,f=b[0]&&await B(p);f&&(N(f.isMyLike),v(f.quantity))}x()},[b[0]]),r.useEffect(()=>{async function x(){const p=`https://saeedwebdev.ir/api/comments/q/${t.id}`,f=await q(p);f&&L(f),f==0&&L(0)}x()},[t]);const z=()=>{async function x(){await me(`https://saeedwebdev.ir/api/posts/${t.id}`)&&k(ue(t))}l&&b[0]&&l.id==b[0].id?x():i(!n)},H=()=>{const x="https://saeedwebdev.ir/api/likes",p=`https://saeedwebdev.ir/api/likes/${b[0].id}=${t.id}`;async function f(){if(await we(x,t.id,b[0].id)){const g=await B(p);N(g.isMyLike),v(g.quantity)}}f()},Q=()=>{const x=`https://saeedwebdev.ir/api/likes/${b[0].id}=${t.id}`,p=`https://saeedwebdev.ir/api/likes/${b[0].id}=${t.id}`;async function f(){if(await ve(x)){const g=await B(p);N(g.isMyLike),v(g.quantity)}}f()},T=()=>{y(!0)},V=()=>{y(!1)},W=()=>{i(!1)};return e.jsxs("div",{className:"relative flex justify-center w-full",children:[e.jsxs("div",{className:`flex flex-col  w-full ${s?"":"md:rounded-[.6rem] rounded-[.3rem] shadow-3xl"} max-w-[800px] bg-white`,children:[s!=="comment"&&e.jsxs("header",{className:"flex justify-between md:pt-3 pt-2 md:px-4 px-2 h-[48px] md:mb-3 mb-1 gap-3",children:[e.jsxs(ne,{to:`/sma/profile/${l&&l.id}`,className:"flex w-full md:gap-3 gap-2 cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 min-w-[40px]",children:e.jsx("img",{src:u||M,alt:"profile picture",className:"object-cover h-full w-full rounded-full"})}),e.jsxs("div",{className:"relative h-9 w-full md:mt-0 mt-1 md:text-[1rem] text-[.9rem]",children:[e.jsx("span",{className:"absolute flex h-4 -top-1",children:l&&l.firstName+" "+l.lastName}),e.jsx("div",{className:"absolute flex h-4 top-5 gap-1",children:e.jsxs("small",{children:["@",l&&l.username]})})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{className:"flex items-center justify-center md:text-2xl text-[1.7rem] min-w-[40px] min-h-[40px] rounded-full hover:bg-bg-hover",children:e.jsx(ie,{})}),e.jsxs("button",{onClick:z,className:"relative flex items-center justify-center font-normal min-w-[40px] min-h-[40px] rounded-full hover:bg-bg-hover",children:[e.jsx("i",{className:"absolute w-[.1rem] md:h-5 h-5 rotate-45 bg-black"}),e.jsx("i",{className:"absolute md:w-5 w-5 h-[.1rem] rotate-45 bg-black"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 max-h-min",children:[e.jsx("div",{className:"md:px-4 px-2 md:text-[1rem] text-[.9rem]",children:e.jsx("p",{children:t.text})}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{src:o,alt:""})})]}),e.jsxs("footer",{className:"flex flex-col md:px-4 px-2",children:[e.jsxs("div",{className:"flex items-center justify-between w-full py-2 border-b-[2px]",children:[e.jsxs("div",{className:"flex gap-1 h-[24px] md:mt-0 mt-1 md:text-[1rem] text-[.9rem]",children:[e.jsx("span",{children:"نظرات"}),e.jsx("span",{children:w&&w})]}),e.jsxs("button",{onClick:A&&A==1?Q:H,className:"relative flex h-[24px]",children:[e.jsx("span",{className:"md:pl-12 pl-11",children:S&&S}),e.jsx("i",{className:"absolute left-5 md:top-0 top-[.1rem] flex items-center justify-center md:text-[.8rem] text-[.7rem] bg-red-400 [&>*]:text-white p-1 rounded-full border-2 border-white",children:e.jsx(re,{})}),e.jsx("i",{className:"absolute left-0 md:top-0 top-[.1rem] flex items-center justify-center md:text-[.8rem] text-[.7rem] bg-blue-400 text-white p-1 rounded-full border-2 border-white",children:e.jsx(ce,{})})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full md:min-h-[44px] min-h-[34px] py-[.25rem]",children:[e.jsxs("button",{className:"flex items-center justify-center w-full h-full md:gap-2 gap-1 hover:bg-bg-hover rounded-[.3rem]",children:[e.jsx("i",{className:"md:text-2xl",children:e.jsx(oe,{})}),e.jsx("span",{className:"md:text-[1rem] text-[.8rem]",children:"دوست داشتن"})]}),e.jsxs("button",{onClick:s!=="comment"?T:a,className:"flex items-center justify-center w-full h-full md:gap-2 gap-1 hover:bg-bg-hover rounded-[.3rem]",children:[e.jsx("i",{className:"md:text-2xl",children:e.jsx(pe,{})}),e.jsx("span",{className:"md:text-[1rem] text-[.8rem]",children:"نظرات"})]}),e.jsxs("button",{onClick:()=>c(!h),className:"relative flex items-center justify-center w-full h-full md:gap-2 gap-1 hover:bg-bg-hover rounded-[.3rem]",children:[e.jsx("i",{className:"md:text-2xl",children:e.jsx(de,{})}),e.jsx("span",{className:"md:text-[1rem] text-[.8rem]",children:"ارسال"}),h&&e.jsx(Se,{})]})]})]})]}),n&&e.jsx(Fe,{handleNotIntrest:W}),j&&l&&s!=="comment"&&e.jsx(Le,{post:t,handleSetComment:V,targetUser:l})]})},Be=({targetUser:t})=>{const[s,a]=r.useState("دنبال کردن"),o=C(d=>d.ui).loginUser;r.useEffect(()=>{const d=t[0]&&o[0]&&`https://saeedwebdev.ir/api/friends/f/${o[0].id}=${t[0].id}`;async function n(){const i=t[0]&&o[0]&&await xe(d);i[0]&&i[0].friend_id==t[0].id&&a("دنبال شده")}n()},[]);const m=()=>{const d="https://saeedwebdev.ir/api/friends",n=o[0]&&o[0].id,i=t[0]&&t[0].id;async function h(){(await fe(d,n,i))[0]&&a("دنبال شده")}h()},u=()=>{const d=`https://saeedwebdev.ir/api/friends/${t[0]&&t[0].id}`;async function n(){await he(d)&&a("دنبال کردن")}n()};return e.jsx("button",{onClick:s=="دنبال کردن"?m:u,className:"flex items-center justify-center min-w-max font-medium md:px-2 px-[.4rem] pt-1 pb-2 md:text-[.8rem] text-[.8rem] rounded-[.4rem] cursor-pointer bg-green-500 hover:bg-green-600 text-white",children:s})};export{Be as F,_e as P,Ae as a};
