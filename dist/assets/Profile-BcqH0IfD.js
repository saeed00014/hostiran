import{j as e,F as A,r as x,i as p,D as w,G as N,L as S,H as T,_ as y,I,J as L,K as $,u as k,N as E,O as M,Q as _,z as H,S as R}from"./index-44ksho7z.js";import{H as z,l as C}from"./index.esm--uS3AQuY.js";import{I as B}from"./index.esm-nZuWVTBh.js";import{F as D,a as O,N as q,P as G}from"./FollowBottun-g3JYuBLL.js";import"./index.esm-XO2RbuVB.js";const J=({targetUser:s})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"-mt-1",children:s[0]&&s[0].firstName+" "+s[0].lastName}),e.jsx("span",{className:"flex gap-2",children:e.jsxs("small",{children:["@",s[0]&&s[0].username]})})]}),K=({targetUser:s})=>{const r=A();return e.jsxs("div",{className:"sticky top-0 flex items-center gap-3 py-2 px-3 w-full border-b-[2px] bg-white z-40",children:[e.jsx("button",{onClick:()=>r(-1),className:"flex border-[2px] rounded-full p-3 text-2xl hover:bg-bg-hover",children:e.jsx(B,{})}),e.jsx(J,{targetUser:s})]})},Q=()=>{const[s,r]=x.useState(null),[l,a]=x.useState(null),[c,m]=x.useState(""),[f,n]=x.useState(""),h=p(i=>i.ui),g=h.isMyProfile,t=h.targetUser,b=h.loginUser;x.useEffect(()=>{const i=`https://saeedwebdev.ir/api/friends/q/${t[0]&&t[0].id}`;async function o(){const d=t[0]&&await T(i);d&&(m(d.followers),n(d.followings))}o()},[t[0]]);const P=()=>{const i=t[0]&&t[0].email,o=`https://saeedwebdev.ir/api/auth/logout/${i}`;async function d(){const u=i&&await I(o);u&&console.log(u)}d()},U=i=>{const o=i.target.files[0],d="https://saeedwebdev.ir/i",u=`https://saeedwebdev.ir/api/users/${t[0].id}`,v=new FormData;v.append("image",o);async function F(){const j=await L(d,v);j&&await $(u,j)=="avatar added"&&(r(j),location.reload())}F()};return x.useEffect(()=>{function i(){const o=new URL(Object.assign({"../../../assets/avatar/testImg.png":y})[`../../../assets/avatar/${t&&t[0].avatar}`],import.meta.url).href,d=o.split("/").length,u=o.split("/")[d-1];u!=="undefined"&&a(o),u=="undefined"&&a(null)}i()},[t]),e.jsxs("header",{className:"relative flex flex-col w-full",children:[e.jsx("div",{className:"flex w-full max-w-none h-72",children:e.jsx("img",{src:w,alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:"flex items-center justify-end w-full lg:gap-5 gap-2 py-5 lg:px-8 md:px-4 px-2",children:g==""?"":g!==b[0].id?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex md:px-5 px-2 pt-1 pb-2 rounded-[.4rem] text-white bg-green-500 gap-2",children:[e.jsx("i",{className:"text-[1.2rem] pt-1",children:e.jsx(N,{})}),e.jsx("span",{className:"md:flex hidden",children:"تغییر اطلاعات "})]}),e.jsx("button",{onClick:P,className:"flex md:px-5 px-2 pt-1 pb-2 rounded-[.4rem] text-white bg-green-500",children:e.jsx("span",{children:"خروج از حساب "})})]}):e.jsxs(e.Fragment,{children:[t&&e.jsx(D,{targetUser:t}),e.jsx("button",{className:"md:flex hidden md:px-5 px-2 pt-1 pb-2 rounded-[.4rem] text-white bg-green-500",children:"شبکهای اجتماعی"}),e.jsx(S,{to:`/sma/chat/${t[0]&&t[0].id}`,className:"md:px-5 px-2 pt-1 pb-2 rounded-[.4rem] text-white bg-green-500",children:"ارسال پیام"})]})}),e.jsxs("div",{className:"flex flex-col",children:[g==""?"":g!==b[0].id?e.jsxs(e.Fragment,{children:[e.jsxs("label",{htmlFor:"image",className:"absolute xl:right-20 lg:right-8 md:right-4 right-2 md:bottom-10 bottom-14 w-32 h-32 border-4 border-white rounded-full cursor-pointer z-30",children:[e.jsx("img",{src:l||w,alt:"",className:"object-cover bg-white  h-full w-full rounded-full"}),e.jsx("span",{className:"absolute right-0 bottom-0 text-2xl",children:e.jsx(N,{})})]}),e.jsx("input",{onChange:i=>U(i),className:"hidden",type:"file",name:"image",id:"image",accept:".jpg, .jpeg, .png"})]}):e.jsx("div",{className:"absolute xl:right-20 lg:right-8 md:right-4 right-2 md:bottom-10 bottom-14 w-32 h-32 border-4 border-white bg-white rounded-full z-50",children:e.jsx("img",{src:l||w,alt:"",className:"object-cover h-full w-full rounded-full"})}),e.jsx("div",{className:"relative flex flex-col w-full min-w-max px-3",children:e.jsxs("div",{className:"flex items-center md:justify-center justify-between h-full md:gap-8 gap-6 lg:px-6",children:[e.jsxs("div",{className:"flex justify-center  min-w-max ",children:[e.jsx("span",{className:"flex items-center",children:t[0]&&t[0].firstName+" "+t[0].lastName}),e.jsx("span",{children:t[0]&&t[0].dis})]}),e.jsxs("div",{className:"flex md:gap-4 gap-2 w-full",children:[e.jsxs("a",{href:"",className:"flex md:flex-row flex-col items-center min-w-max md:gap-1",children:[e.jsx("span",{children:f&&f}),e.jsx("span",{children:"دنبال کننده"})]}),e.jsxs("a",{href:"",className:"flex md:flex-row flex-col items-center min-w-max md:gap-1",children:[e.jsx("span",{children:c&&c}),e.jsx("span",{children:"دنبال شده"})]})]})]})})]})]})},W=({targetUser:s})=>e.jsxs("div",{className:"flex flex-col w-full max-w-[800px] gap-1 py-2 pb-4 px-3 shadow-3xl rounded-[.6rem] bg-white",children:[e.jsx("div",{children:e.jsx("span",{children:"درباره"})}),e.jsx("div",{children:e.jsx("span",{children:s[0]&&s[0].firstName+" "+s[0].lastName})})]}),V=()=>{const r=p(l=>l.ui).alltargetUserPosts;return e.jsx("div",{className:"flex flex-col w-full max-w-[800px] h-fit bg-white",children:e.jsxs("div",{className:"flex flex-col gap-4 py-2 pb-4 px-3 shadow-3xl rounded-[.6rem]",children:[e.jsx("span",{children:"داغ ترین اپلود ها"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 rounded-[.4rem] overflow-hidden",children:r?r.map(l=>{let a="";function c(){const m=new URL(Object.assign({"../../../../assets/avatar/testImg.png":y})[`../../../../assets/avatar/${l&&l.media}`],import.meta.url).href,f=m.split("/").length,n=m.split("/")[f-1];n!=="undefined"&&(a=m),n=="undefined"&&(a=null)}return c(),e.jsx("img",{src:a,alt:""})}):e.jsx("div",{})}),e.jsx("button",{className:"h-10 w-full bg-bg-hover rounded-[.4rem]",children:"مشاهده همه"})]})})},X=({targetUser:s})=>e.jsxs("div",{className:"lg:sticky lg:top-20 flex flex-col justify-between items-center w-full h-fit px-3 md:gap-6 gap-4",children:[e.jsx(W,{targetUser:s}),e.jsx(V,{targetUser:s})]}),Y=({targetUser:s})=>{const l=p(a=>a.ui).alltargetUserPosts;return e.jsx("div",{className:"flex flex-col w-full md:gap-6 gap-4",children:l[0]==""?"":l[0]!=="no post"?l.map(a=>e.jsx(O,{post:a,targetUser:s[0]})):e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(q,{})})})},Z=({targetUser:s})=>{const r=p(c=>c.ui),l=r.loginUser,a=r.isMyProfile;return e.jsxs("div",{className:"flex flex-col justify-between w-full h-full px-3 md:gap-6 gap-4",children:[a==""||a==l[0].id?"":e.jsx(G,{}),e.jsx("div",{className:"flex flex-col w-full gap-4 pb-6",children:e.jsx(Y,{targetUser:s,loginUser:l})})]})},ee=({targetUser:s})=>e.jsxs("div",{className:"flex flex-col justify-center items-center gap-6 w-full",children:[e.jsx(Q,{targetUser:s}),e.jsxs("div",{className:"flex justify-center md:items-start items-center lg:flex-row flex-col-reverse w-full lg:gap-0 md:gap-6 gap-4 lg:pt-2 pt-0 lg:px-6 md:px-2 px-0",children:[e.jsx(Z,{targetUser:s}),e.jsx(X,{targetUser:s})]})]}),se=()=>{const[s,r]=x.useState(""),l=k(),c=window.location.href.split("/"),m=c[c.length-1];return x.useEffect(()=>{async function f(){const n=await M(`https://saeedwebdev.ir/api/users/${m}`);n&&(r(n),l(_(n)))}f()},[m]),x.useEffect(()=>{l(E());async function f(){if(s[0]){const n=await H(`https://saeedwebdev.ir/api/posts/${s[0].id}`);n&&l(R(n))}}f()},[s]),e.jsx("section",{className:"flex flex-col justify-start items-center w-full overflow-y-scroll md:pb-4 pb-16 max-h-screen h-full",children:s?e.jsxs(e.Fragment,{children:[e.jsx(K,{targetUser:s}),e.jsx(ee,{targetUser:s})]}):e.jsx("div",{className:"h-screen flex items-center",children:e.jsx(C,{color:"black"})})})},ce=z(se);export{ce as default};
