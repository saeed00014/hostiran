import{r as o,j as s,z as h,aT as cs,aU as _s,aV as ps,i as v,_ as u,C as x,D as f,E as m,F as b,G as j,H as S,I as N,J as w,K as y,N as P,O as F,P as M,Q as $,S as E,U as C,V as L,W as B,X as k,Y as R,Z as A,$ as G,a0 as H,a1 as I,a2 as O,a3 as T,a4 as V,a5 as D,a6 as W,a7 as X,a8 as q,a9 as z,aa as J,ab as K,ac as Q,ad as Y,ae as Z,af as U,ag as ss,ah as as,ai as es,aj as ts,ak as ns,al as ls,g as rs,u as is,aE as gs,aF as vs,aG as hs,aW as ds,au as us,av as xs,aX as fs}from"./index-kJGUf367.js";import{G as ms,H as bs}from"./index.esm-hWt--9ux.js";import{c as js}from"./index.esm-noklXd6b.js";const Ss=({targetUser:a})=>{const[e,n]=o.useState(null);return o.useEffect(()=>{function l(){const t=new URL(Object.assign({})[`../../assets/avatar/${a&&a[0].avatar}`],import.meta.url).href,_=t.split("/").length,r=t.split("/")[_-1];r!=="undefined"&&n(t),r=="undefined"&&n(null)}l()},[a]),s.jsxs("div",{className:"sticky top-0 flex items-center justify-between w-full min-h-[75px] xl:px-8 md:px-4 px-2 bg-white",children:[s.jsxs("div",{className:"flex items-center w-full gap-3",children:[s.jsx("div",{className:"w-[50px] h-[50px]",children:s.jsx("img",{src:e||h,alt:"",className:"w-full h-full rounded-full"})}),s.jsx("span",{className:"-mt-1",children:a&&a[0].firstName+" "+a[0].lastName})]}),s.jsxs("div",{className:"flex gap-4 text-3xl",children:[s.jsx("i",{children:s.jsx(cs,{})}),s.jsx("i",{children:s.jsx(_s,{})}),s.jsx("i",{children:s.jsx(ps,{})})]})]})},Ns=({message:a,loginUser:e,targetUser:n,avatar:l})=>s.jsxs("div",{className:`flex ${a.user_id==e[0].id?"justify-end":"justify-start gap-2"} min-w-max`,children:[a.user_id!==e[0].id?s.jsx("div",{className:"w-[40px] h-[40px] ",children:s.jsx("img",{src:l||h,alt:"",className:"object-cover h-full w-full rounded-full"})}):s.jsx(s.Fragment,{}),s.jsxs("p",{className:`relative max-w-[22rem] px-3 py-2 rounded-[1.5rem] break-words ${a.user_id==(e[0]&&e[0].id)&&e[0].id?"bg-blue-700 text-left text-white":"bg-gray-300"}`,children:[a.user_id==e[0].id&&s.jsx("span",{className:"absolute right-3 -top-4 min-w-max text-black text-[.7rem]",children:e[0]&&e[0].firstName+" "+e[0].lastName}),a.user_id!==e[0].id&&s.jsx("span",{className:"absolute right-3 -top-4 min-w-max text-black text-[.7rem]",children:n[0]&&n[0].firstName+" "+n[0].lastName}),a.text]})]}),ws=({targetUser:a,avatar:e})=>s.jsxs("div",{className:"flex flex-col items-center w-full h-full pt-10 gap-2",children:[s.jsx("div",{className:"w-28 h-28",children:s.jsx("img",{src:e||h,alt:"",className:"w-full h-full object-cover rounded-full"})}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("span",{className:"flex justify-center",children:a&&a[0].firstName+" "+a[0].lastName}),s.jsx("a",{href:`/sma/profile/${a&&a[0].id}`,className:"flex py-2 px-4 bg-bg-hover rounded-[.5rem]",children:"View Profile"})]})]}),ys=({targetUser:a,loginUser:e})=>{const l=v(r=>r.ui).allMessages,[t,_]=o.useState(null);return o.useEffect(()=>{function r(){const p=new URL(Object.assign({"../../../../assets/avatar/1700021175455-Screenshot (3).png":u,"../../../../assets/avatar/1700021380995-laptopP1.png":x,"../../../../assets/avatar/1700022766143-Screenshot (1).png":f,"../../../../assets/avatar/1700026203021-laptopP1.png":m,"../../../../assets/avatar/1700026672914-Screenshot (3).png":b,"../../../../assets/avatar/1700026718463-Screenshot (5).png":j,"../../../../assets/avatar/1700026730172-Screenshot (4).png":S,"../../../../assets/avatar/1700026739207-Screenshot (6).png":N,"../../../../assets/avatar/1700026851107-Screenshot (4).png":w,"../../../../assets/avatar/1700026900991-Screenshot (5).png":y,"../../../../assets/avatar/1700027014952-Screenshot (6).png":P,"../../../../assets/avatar/1700027098382-Screenshot (5).png":F,"../../../../assets/avatar/1700027241065-Screenshot (3).png":M,"../../../../assets/avatar/1700027368448-Favion.png":$,"../../../../assets/avatar/1700027406405-laptopP1.png":E,"../../../../assets/avatar/1700027419360-Favivon.png":C,"../../../../assets/avatar/1700027464646-bodyForm.png":L,"../../../../assets/avatar/1700027554968-laptopP1.png":B,"../../../../assets/avatar/1700027691969-Screenshot (3).png":k,"../../../../assets/avatar/1700027773846-Favion.png":R,"../../../../assets/avatar/1700027884185-Screenshot (5).png":A,"../../../../assets/avatar/1700027930931-laptopP1.png":G,"../../../../assets/avatar/1700027974019-Screenshot (6).png":H,"../../../../assets/avatar/1700027994400-Screenshot (5).png":I,"../../../../assets/avatar/1700028071397-laptopP1.png":O,"../../../../assets/avatar/1700028097989-bodySign.png":T,"../../../../assets/avatar/1700028183435-Screenshot (5).png":V,"../../../../assets/avatar/1700028191265-Screenshot (3).png":D,"../../../../assets/avatar/1700028279413-Favion.png":W,"../../../../assets/avatar/1700028317628-Screenshot (3).png":X,"../../../../assets/avatar/1700028419543-laptopP1.png":q,"../../../../assets/avatar/1700028513423-Screenshot (6).png":z,"../../../../assets/avatar/1700028652992-Favivon.png":J,"../../../../assets/avatar/1700028867853-laptopP1.png":K,"../../../../assets/avatar/1700028960535-Screenshot (5).png":Q,"../../../../assets/avatar/1700028975192-perresume.png":Y,"../../../../assets/avatar/1700029004313-Screenshot (20).png":Z,"../../../../assets/avatar/1700029375605-laptopP1.png":U,"../../../../assets/avatar/1700029411873-Screenshot (6).png":ss,"../../../../assets/avatar/1700029865432-laptopP1.png":as,"../../../../assets/avatar/1700040216132-Screenshot (76).png":es,"../../../../assets/avatar/1700040248940-Screenshot (36).png":ts,"../../../../assets/avatar/1700283463526-Screenshot (46).png":ns,"../../../../assets/avatar/1700283571206-bodyCard.png":ls})[`../../../../assets/avatar/${a&&a[0].avatar}`],import.meta.url).href,i=p.split("/").length,c=p.split("/")[i-1];c!=="undefined"&&_(p),c=="undefined"&&_(null)}r()},[a]),s.jsx("div",{className:"flex flex-col w-full gap-4 pt-4 pb-56",children:l[0]?l.map(r=>s.jsx(Ns,{message:r,loginUser:e,targetUser:a,avatar:t})):s.jsx(ws,{targetUser:a,avatar:t})})},Ps=a=>rs.get(a).then(({data:e})=>e).catch(e=>{console.log(e)}),Fs=(a,e,n,l)=>rs.post(a,{user_id:e,targetUser_id:n,text:l}).then(({data:t})=>t).catch(t=>{console.log(t)}),Ms=({targetUser:a})=>{const e=o.useRef(),[n,l]=o.useState(""),t=is(),r=v(i=>i.ui).loginUser,p=i=>{i.preventDefault(),l("");const c=e.current.text.value,g="https://saeedwebdev.ir/api/messages";async function os(){const d=a[0]&&r[0]&&await Fs(g,r[0].id,a[0].id,c);d&&t(ds(d))}os()};return s.jsxs("form",{onSubmit:i=>p(i),ref:e,className:"relative flex items-center justify-center border-[2px] w-full h-11 rounded-full",children:[s.jsx("input",{onChange:i=>l(i.target.value),value:n,type:"text",name:"text",placeholder:"پیام ...",className:"h-full w-full rounded-full px-12"}),n?s.jsxs("div",{className:"absolute right-3 text-[1.5rem] text-blue-600",children:[s.jsx("label",{htmlFor:"submit",children:s.jsx(gs,{})}),s.jsx("input",{type:"submit",id:"submit",className:"hidden"})]}):s.jsx("i",{className:"absolute right-3 text-[1.5rem]",children:s.jsx(vs,{})}),s.jsxs("div",{className:"absolute left-6 flex text-[1.5rem] gap-4",children:[s.jsx("i",{children:s.jsx(hs,{})}),s.jsx("i",{children:s.jsx(ms,{})})]})]})},$s=({targetUser:a,loginUser:e})=>s.jsxs("div",{className:"flex flex-col justify-between h-full xl:px-8 md:px-4 px-2",children:[s.jsx("div",{className:"flex h-full overflow-y-scroll",children:s.jsx(ys,{targetUser:a,loginUser:e})}),s.jsx("div",{className:"sticky md:bottom-0 bottom-[60px] flex items-center justify-center h-fit bg-bg-theme-body py-3",children:s.jsx(Ms,{targetUser:a})})]}),Es=({targetUser:a,loginUser:e})=>s.jsxs("div",{className:"flex flex-col w-full h-full",children:[s.jsx(Ss,{targetUser:a}),s.jsx($s,{targetUser:a,loginUser:e})]}),Cs=()=>{const e=v(n=>n.ui).loginUser;return s.jsxs("div",{className:"sticky top-0 flex flex-col items-center w-full bg-white",children:[s.jsxs("div",{className:"flex justify-between w-full px-6 pt-6 pb-4",children:[s.jsx("a",{href:"",children:e[0]&&e[0].firstName+" "+e[0].lastName}),s.jsx("i",{className:"text-2xl",children:s.jsx(js,{})})]}),s.jsxs("div",{className:"flex justify-between w-full px-6 py-2",children:[s.jsx("span",{children:"Messages"}),s.jsx("a",{href:"",children:"Requests"})]})]})},Ls=({user:a})=>{const[e,n]=o.useState(null);return o.useEffect(()=>{function l(){const t=new URL(Object.assign({"../../../../assets/avatar/1700021175455-Screenshot (3).png":u,"../../../../assets/avatar/1700021380995-laptopP1.png":x,"../../../../assets/avatar/1700022766143-Screenshot (1).png":f,"../../../../assets/avatar/1700026203021-laptopP1.png":m,"../../../../assets/avatar/1700026672914-Screenshot (3).png":b,"../../../../assets/avatar/1700026718463-Screenshot (5).png":j,"../../../../assets/avatar/1700026730172-Screenshot (4).png":S,"../../../../assets/avatar/1700026739207-Screenshot (6).png":N,"../../../../assets/avatar/1700026851107-Screenshot (4).png":w,"../../../../assets/avatar/1700026900991-Screenshot (5).png":y,"../../../../assets/avatar/1700027014952-Screenshot (6).png":P,"../../../../assets/avatar/1700027098382-Screenshot (5).png":F,"../../../../assets/avatar/1700027241065-Screenshot (3).png":M,"../../../../assets/avatar/1700027368448-Favion.png":$,"../../../../assets/avatar/1700027406405-laptopP1.png":E,"../../../../assets/avatar/1700027419360-Favivon.png":C,"../../../../assets/avatar/1700027464646-bodyForm.png":L,"../../../../assets/avatar/1700027554968-laptopP1.png":B,"../../../../assets/avatar/1700027691969-Screenshot (3).png":k,"../../../../assets/avatar/1700027773846-Favion.png":R,"../../../../assets/avatar/1700027884185-Screenshot (5).png":A,"../../../../assets/avatar/1700027930931-laptopP1.png":G,"../../../../assets/avatar/1700027974019-Screenshot (6).png":H,"../../../../assets/avatar/1700027994400-Screenshot (5).png":I,"../../../../assets/avatar/1700028071397-laptopP1.png":O,"../../../../assets/avatar/1700028097989-bodySign.png":T,"../../../../assets/avatar/1700028183435-Screenshot (5).png":V,"../../../../assets/avatar/1700028191265-Screenshot (3).png":D,"../../../../assets/avatar/1700028279413-Favion.png":W,"../../../../assets/avatar/1700028317628-Screenshot (3).png":X,"../../../../assets/avatar/1700028419543-laptopP1.png":q,"../../../../assets/avatar/1700028513423-Screenshot (6).png":z,"../../../../assets/avatar/1700028652992-Favivon.png":J,"../../../../assets/avatar/1700028867853-laptopP1.png":K,"../../../../assets/avatar/1700028960535-Screenshot (5).png":Q,"../../../../assets/avatar/1700028975192-perresume.png":Y,"../../../../assets/avatar/1700029004313-Screenshot (20).png":Z,"../../../../assets/avatar/1700029375605-laptopP1.png":U,"../../../../assets/avatar/1700029411873-Screenshot (6).png":ss,"../../../../assets/avatar/1700029865432-laptopP1.png":as,"../../../../assets/avatar/1700040216132-Screenshot (76).png":es,"../../../../assets/avatar/1700040248940-Screenshot (36).png":ts,"../../../../assets/avatar/1700283463526-Screenshot (46).png":ns,"../../../../assets/avatar/1700283571206-bodyCard.png":ls})[`../../../../assets/avatar/${a&&a.avatar}`],import.meta.url).href,_=t.split("/").length,r=t.split("/")[_-1];r!=="undefined"&&n(t),r=="undefined"&&n(null)}l()},[a]),s.jsxs("a",{href:`/sma/chat/${a.id}`,className:"flex items-center py-2 px-6 gap-4 hover:bg-bg-hover",children:[s.jsx("div",{className:"w-14 h-14",children:s.jsx("img",{src:e||h,alt:"",className:"w-full h-full rounded-full"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"-mt-1",children:a&&a.firstName+" "+a.lastName}),s.jsx("small",{children:"هیچ پیامی ارسال نشده است ."})]})]})},Bs=()=>{const a=v(t=>t.ui),e=a.allLoginUsers,n=a.loginUser,l=e&&e.filter(t=>t.id!==n[0].id);return s.jsx("div",{className:"overflow-y-scroll",children:l.map(t=>s.jsx(Ls,{user:t}))})},ks=()=>s.jsxs("div",{className:"lg:flex hidden flex-col min-w-[360px] border-l-[1px] bg-white",children:[s.jsx(Cs,{}),s.jsx(Bs,{})]}),Rs=()=>{const a=is(),[e,n]=o.useState(),t=v(i=>i.ui).loginUser,r=window.location.href.split("/"),p=r[r.length-1];return o.useEffect(()=>{async function i(){const c=`https://saeedwebdev.ir/api/users/${p}`,g=await us(c);g&&(n(g),a(xs(g[0])))}i()},[p]),o.useEffect(()=>{async function i(){const c=e[0]&&t[0]&&await Ps(`https://saeedwebdev.ir/api/messages/${t[0].id}=${e[0].id}`);c&&a(fs(c))}i()},[e]),s.jsxs("section",{className:"flex w-full max-h-screen min-h-screen overflow-hidden",children:[s.jsx(ks,{}),s.jsx(Es,{targetUser:e,loginUser:t})]})},Is=bs(Rs);export{Is as default};
