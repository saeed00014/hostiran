import{U as H,r as d,u as S,i as v,j as e,D as P,V as O,W as Q,J as T,X as A,Y as B,Z as M,_ as G,g as F,$ as V,a0 as J,a1 as W,a2 as X,t as Y,a3 as Z,L as K,a4 as U,a5 as ee,a6 as te,a7 as se,a8 as le,a9 as ae,aa as ie,ab as ne,ac as re,ad as ce}from"./index-mzYQ-_g6.js";import{l as de,G as oe}from"./index.esm-SAaOp0tk.js";import{b as me}from"./index.esm-i0v7lsZ8.js";function xe(t){return H({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#E65100",d:"M41,42H13c-2.2,0-4-1.8-4-4V18c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4v20C45,40.2,43.2,42,41,42z"}},{tag:"path",attr:{fill:"#F57C00",d:"M35,36H7c-2.2,0-4-1.8-4-4V12c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4v20C39,34.2,37.2,36,35,36z"}},{tag:"circle",attr:{fill:"#FFF9C4",cx:"30",cy:"16",r:"3"}},{tag:"polygon",attr:{fill:"#942A09",points:"17,17.9 8,31 26,31"}},{tag:"polygon",attr:{fill:"#BF360C",points:"28,23.5 22,31 34,31"}}]})(t)}const Fe=()=>{const[t,s]=d.useState(""),[i,l]=d.useState(!1),n=S(),x=d.useRef(),c=v(a=>a.ui).loginUser,r=a=>{a.preventDefault(),l(!0);const u="https://saeedwebdev.ir/i",o=c[0].id,j=x.current.text.value,g=0,N=new FormData;N.append("image",t);const b="https://saeedwebdev.ir/api/posts";async function L(){if(t){const y=await T(u,N);if(y){const m=y&&await A(b,o,j,y,g);if(m){n(B(m));const k=await M(b);n(G(k)),l(!1)}}}if(!t){const m=await A(b,o,j,"",g);if(m){n(B(m));const k=await M(b);n(G(k)),l(!1)}}}L()};return e.jsx("form",{enctype:"multipart/form-data",onSubmit:a=>r(a),ref:x,className:"flex justify-center w-full",children:e.jsxs("div",{className:"flex flex-col items-center justify-center w-full shadow-3xl rounded-[.6rem] max-w-[800px] bg-white",children:[e.jsxs("div",{className:"flex w-full md:p-4 px-[5%] py-2 md:gap-2 gap-1",children:[e.jsx("label",{htmlFor:"text",className:"md:max-w-[50px] max-w-[40px] md:h-[50px] h-[40px] bg-white rounded-full",children:e.jsx("img",{src:c[0].avatar?`https://saeedwebdev.ir/avatar/${c[0].avatar}`:P,className:"md:max-w-[50px] max-w-[40px] md:h-[50px] h-[40px] object-cover rounded-full"})}),e.jsx("input",{type:"text",name:"text",id:"text",placeholder:"به چه چیری فکر میکنید ؟",className:"w-full pr-2 md:text-[1rem] text-[.9rem]"})]}),e.jsx("div",{className:"flex items-center justify-center w-full md:px-10 px-[5%]",children:e.jsxs("div",{className:"flex items-center justify-between w-full border-t-[2px] py-4 ",children:[e.jsxs("div",{className:"flex w-full md:gap-5 gap-2 [&>div>label]:flex [&>div>label]:gap-1 [&>div>input]:hidden [&>div>label>span]:flex [&>div>label>span]:items-center md:[&>div>label>span]:text-[1.1rem] [&>div>label>span]:text-clamp1 [&>div>label>span]:text-orange-600",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsxs("label",{htmlFor:"image",children:[e.jsx("span",{children:e.jsx(xe,{})}),e.jsx("span",{children:"فیلم و عکس"})]}),e.jsx("input",{onChange:a=>s(a.target.files[0]),type:"file",name:"image",id:"image",accept:".jpg, .jpeg, .png"})]}),e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsxs("label",{htmlFor:"location",children:[e.jsx("span",{children:e.jsx(O,{})}),e.jsx("span",{children:"مکان"})]}),e.jsx("input",{type:"location",name:"location",id:"location"})]}),e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsxs("label",{children:[e.jsx("span",{children:e.jsx(Q,{})}),e.jsx("span",{children:"ها تگ"})]}),e.jsx("input",{type:"file",name:"image",id:"image"})]})]}),e.jsx("div",{className:"flex justify-end w-[30%]",children:e.jsxs("div",{className:"flex items-center bg-green-500 hover:bg-green-600 rounded-[.4rem] text-white font-semibold",children:[i&&e.jsx("span",{className:"md:pr-4 pr-[.7rem]",children:e.jsx(de,{})}),e.jsx("input",{type:"submit",name:"submit",value:"اشتراک",className:"cursor-pointer md:py-2 py-[.4rem] md:px-4 px-[.7rem] md:text-[1rem] text-[.9rem]"})]})})]})})]})})},$=t=>F.get(t).then(({data:s})=>s).catch(s=>{console.log(s)}),ue=(t,s,i)=>F.post(t,{post_id:s,user_id:i}).then(({data:l})=>l).catch(l=>{console.log(l)}),fe=t=>F.delete(t).then(({data:s})=>(console.log(s),s)).catch(s=>{console.log(s)}),_=t=>F.get(t).then(({data:s})=>s).catch(s=>{console.log(s)}),he=(t,s,i,l)=>F.post(t,{text:s,post_id:i,user_id:l}).then(({data:n})=>(console.log("data"),console.log(n),n)).catch(n=>{console.log(n)}),pe=({comment:t,loginUser:s,targetUser:i})=>{const[l,n]=d.useState(null),c=v(r=>r.ui).allLoginUsers.find(r=>r.id==t.user_id);return d.useEffect(()=>{function r(){const a=new URL(Object.assign({})[`../../../assets/avatar/${i&&i.avatar}`],import.meta.url).href,u=a.split("/").length,o=a.split("/")[u-1];o!=="undefined"&&n(a),o=="undefined"&&n(null)}r()},[i]),e.jsxs("div",{className:`flex ${t.user_id==s[0].id?"justify-end":"justify-start gap-2"} min-w-max`,children:[t.user_id!==s[0].id?e.jsx("div",{className:"w-[40px] h-[40px] ",children:e.jsx("img",{src:l||P,alt:"",className:"object-cover h-full w-full rounded-full"})}):e.jsx(e.Fragment,{}),e.jsxs("p",{className:`relative max-w-[22rem] px-3 py-2 rounded-[1.5rem] break-words ${t.user_id==s[0].id?"bg-blue-700 text-left text-white":"bg-gray-300"} overflow-visible`,children:[t.user_id==s[0].id&&e.jsx("span",{className:"absolute left-0 -top-4 text-black text-[.7rem] min-w-max",children:s[0]&&s[0].firstName+" "+s[0].lastName}),t.user_id!==s[0].id&&e.jsx("span",{className:"absolute right-3 -top-4 text-black text-[.7rem] min-w-max",children:c&&c.firstName+" "+c.lastName}),t.text]})]})},je=({post:t})=>{const s=d.useRef(),[i,l]=d.useState(""),n=S(),p=v(r=>r.ui).loginUser,c=r=>{r.preventDefault(),l("");const a=s.current.text.value,u="https://saeedwebdev.ir/api/comments";async function o(){const j=await he(u,a,t.id,p[0].id);j&&n(X(j))}o()};return e.jsxs("form",{onSubmit:r=>c(r),ref:s,className:"relative flex items-center justify-center border-[2px] w-full h-11 rounded-full",children:[e.jsx("input",{onChange:r=>l(r.target.value),value:i,type:"text",name:"text",placeholder:"پیام ...",className:"h-full w-full rounded-full px-12"}),i?e.jsxs("div",{className:"absolute right-3 text-[1.5rem] text-blue-600",children:[e.jsx("label",{htmlFor:"submit",children:e.jsx(V,{})}),e.jsx("input",{type:"submit",id:"submit",className:"hidden"})]}):e.jsx("i",{className:"absolute right-3 text-[1.5rem]",children:e.jsx(J,{})}),e.jsxs("div",{className:"absolute left-6 flex text-[1.5rem] gap-4",children:[e.jsx("i",{children:e.jsx(W,{})}),e.jsx("i",{children:e.jsx(oe,{})})]})]})},be=({post:t,targetUser:s})=>{const[i,l]=d.useState([]),[n,x]=d.useState(!1),c=v(a=>a.ui).loginUser,r=S();return d.useEffect(()=>{x(!0);const a=`https://saeedwebdev.ir/api/comments/${t.id}`;async function u(){const o=await _(a);o&&(l(o),x(!1),r(Z(o))),o||x(!1)}u()},[]),e.jsx("div",{className:"relative flex items-start w-full h-full px-4",children:e.jsxs("div",{className:"sticky top-0 flex flex-col items-start justify-between w-full h-full border-t-2",children:[e.jsx("div",{className:"flex flex-col w-full gap-3 pt-4",children:n?e.jsx(Y,{}):i[0]?i.map(a=>e.jsx(pe,{comment:a,loginUser:c,targetUser:s})):e.jsx("div",{className:"flex items-center justify-center font-medium",children:"هیچ نظری وجود ندارد"})}),e.jsx("div",{className:"sticky bottom-0 flex items-center justify-center w-full bg-bg-theme-body py-3",children:e.jsx(je,{post:t})})]})})},we=({post:t,handleSetComment:s,targetUser:i})=>e.jsx("div",{className:"fixed top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-gray-400/25 z-50 py-4 px-10 ",children:e.jsxs("div",{className:"flex flex-col w-full h-full max-h-[800px] max-w-[700px] bg-white overflow-y-scroll rounded-[.6rem]",children:[e.jsxs("header",{className:"sticky top-0 bg-white flex justify-center items-center w-full px-4 min-h-[70px] text-[1.3rem] gap-3 z-50 border-b-[1px]",children:[e.jsx("h1",{children:i&&i.firstName+" "+i.lastName}),e.jsx("div",{className:"absolute left-4",children:e.jsxs("button",{onClick:s,className:"relative flex items-center justify-center font-normal w-10 h-10 bg-gray-300 rounded-full hover:bg-bg-hover",children:[e.jsx("i",{className:"absolute w-[.1rem] h-5 rotate-45 bg-black"}),e.jsx("i",{className:"absolute w-5 h-[.1rem] rotate-45 bg-black"})]})})]}),e.jsx("div",{children:e.jsx(Ne,{post:t,edition:"comment",handleSetCommentCall:s})}),e.jsx("div",{className:"h-full bg-bg-theme-body",children:e.jsx(be,{post:t,targetUser:i})})]})}),ge=()=>{},ve=({handleNotIntrest:t})=>e.jsx("div",{className:"fixed top-0 left-0 flex items-center justify-center w-screen h-screen bg-gray-700/50 z-50",children:e.jsxs("div",{className:"flex flex-col items-center justify-between w-[20rem] border-t-2 border-x-2 bg-white rounded-[1rem] [&>*:last-child]:rounded-b-[1rem] [&>*]:flex [&>*]:justify-center [&>*]:items-center [&>*]:w-full [&>*]:p-2 [&>*]:h-[48px] [&>*]:border-b-2 [&>*]:cursor-pointer",children:[e.jsx("button",{children:"Report"}),e.jsx("button",{children:"Add favorites"}),e.jsx("button",{children:"Go to posts"}),e.jsx("button",{children:"About this acount"}),e.jsx("button",{onClick:t,children:"Cancel"})]})}),Ne=({post:t,edition:s,handleSetCommentCall:i,targetUser:l})=>{const[n,x]=d.useState(!1),[p,c]=d.useState(!1),[r,a]=d.useState(!1),[u,o]=d.useState(""),[j,g]=d.useState(null),[N,b]=d.useState(null),L=S(),m=v(f=>f.ui).loginUser;d.useEffect(()=>{async function f(){const w=`https://saeedwebdev.ir/api/likes/${m[0]&&m[0].id}=${t.id}`,h=m[0]&&await $(w);h&&(b(h.isMyLike),g(h.quantity))}f()},[m[0]]),d.useEffect(()=>{async function f(){const w=`https://saeedwebdev.ir/api/comments/q/${t.id}`,h=await _(w);h&&o(h),h==0&&o(0)}f()},[t]);const k=()=>{async function f(){await ae(`https://saeedwebdev.ir/api/posts/${t.id}`)&&L(ie(t))}l&&m[0]&&l.id==m[0].id?f():x(!n)},D=()=>{const f="https://saeedwebdev.ir/api/likes",w=`https://saeedwebdev.ir/api/likes/${m[0].id}=${t.id}`;async function h(){if(await ue(f,t.id,m[0].id)){const C=await $(w);b(C.isMyLike),g(C.quantity)}}h()},E=()=>{const f=`https://saeedwebdev.ir/api/likes/${m[0].id}=${t.id}`,w=`https://saeedwebdev.ir/api/likes/${m[0].id}=${t.id}`;async function h(){if(await fe(f)){const C=await $(w);b(C.isMyLike),g(C.quantity)}}h()},I=()=>{a(!0)},R=()=>{a(!1)},z=()=>{x(!1)};return e.jsxs("div",{className:"relative flex justify-center w-full",children:[e.jsxs("div",{className:`flex flex-col  w-full ${s?"":"md:rounded-[.6rem] rounded-[.3rem] shadow-3xl"} max-w-[800px] bg-white`,children:[s!=="comment"&&e.jsxs("header",{className:"flex justify-between md:pt-3 pt-2 md:px-4 px-2 h-[48px] md:mb-3 mb-1 gap-3",children:[e.jsxs(K,{to:`/sma/profile/${l&&l.id}`,className:"flex w-full md:gap-3 gap-2 cursor-pointer",children:[e.jsx("div",{className:"w-10 h-10 min-w-[40px]",children:e.jsx("img",{src:l.avatar?`https://saeedwebdev.ir/avatar/${l.avatar}`:P,alt:"profile picture",className:"object-cover h-full w-full rounded-full "})}),e.jsxs("div",{className:"relative h-9 w-full md:mt-0 mt-1 md:text-[1rem] text-[.9rem]",children:[e.jsx("span",{className:"absolute flex h-4 -top-1",children:l&&l.firstName+" "+l.lastName}),e.jsx("div",{className:"absolute flex h-4 top-5 gap-1",children:e.jsxs("small",{children:["@",l&&l.username]})})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{className:"flex items-center justify-center md:text-2xl text-[1.7rem] min-w-[40px] min-h-[40px] rounded-full hover:bg-bg-hover",children:e.jsx(U,{})}),e.jsxs("button",{onClick:k,className:"relative flex items-center justify-center font-normal min-w-[40px] min-h-[40px] rounded-full hover:bg-bg-hover",children:[e.jsx("i",{className:"absolute w-[.1rem] md:h-5 h-5 rotate-45 bg-black"}),e.jsx("i",{className:"absolute md:w-5 w-5 h-[.1rem] rotate-45 bg-black"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 max-h-min",children:[e.jsx("div",{className:"md:px-4 px-2 md:text-[1rem] text-[.9rem]",children:e.jsx("p",{children:t.text})}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{src:`https://saeedwebdev.ir/avatar/${t.media}`,alt:""})})]}),e.jsxs("footer",{className:"flex flex-col md:px-4 px-2",children:[e.jsxs("div",{className:"flex items-center justify-between w-full py-2 border-b-[2px]",children:[e.jsxs("div",{className:"flex gap-1 h-[24px] md:mt-0 mt-1 md:text-[1rem] text-[.9rem]",children:[e.jsx("span",{children:"نظرات"}),e.jsx("span",{children:u&&u})]}),e.jsxs("button",{onClick:N&&N==1?E:D,className:"relative flex h-[24px]",children:[e.jsx("span",{className:"md:pl-12 pl-11",children:j&&j}),e.jsx("i",{className:"absolute left-5 md:top-0 top-[.1rem] flex items-center justify-center md:text-[.8rem] text-[.7rem] bg-red-400 [&>*]:text-white p-1 rounded-full border-2 border-white",children:e.jsx(ee,{})}),e.jsx("i",{className:"absolute left-0 md:top-0 top-[.1rem] flex items-center justify-center md:text-[.8rem] text-[.7rem] bg-blue-400 text-white p-1 rounded-full border-2 border-white",children:e.jsx(te,{})})]})]}),e.jsxs("div",{className:"flex items-center justify-between w-full md:min-h-[44px] min-h-[34px] py-[.25rem]",children:[e.jsxs("button",{className:"flex items-center justify-center w-full h-full md:gap-2 gap-1 hover:bg-bg-hover rounded-[.3rem]",children:[e.jsx("i",{className:"md:text-2xl",children:e.jsx(se,{})}),e.jsx("span",{className:"md:text-[1rem] text-[.8rem]",children:"دوست داشتن"})]}),e.jsxs("button",{onClick:s!=="comment"?I:i,className:"flex items-center justify-center w-full h-full md:gap-2 gap-1 hover:bg-bg-hover rounded-[.3rem]",children:[e.jsx("i",{className:"md:text-2xl",children:e.jsx(me,{})}),e.jsx("span",{className:"md:text-[1rem] text-[.8rem]",children:"نظرات"})]}),e.jsxs("button",{onClick:()=>c(!p),className:"relative flex items-center justify-center w-full h-full md:gap-2 gap-1 hover:bg-bg-hover rounded-[.3rem]",children:[e.jsx("i",{className:"md:text-2xl",children:e.jsx(le,{})}),e.jsx("span",{className:"md:text-[1rem] text-[.8rem]",children:"ارسال"}),p&&e.jsx(ge,{})]})]})]})]}),n&&e.jsx(ve,{handleNotIntrest:z}),r&&l&&s!=="comment"&&e.jsx(we,{post:t,handleSetComment:R,targetUser:l})]})},Se=()=>e.jsx("div",{className:"flex justify-center md:py-2 py-1 md:pb-3 pb-2 px-3 w-full shadow-3xl rounded-[.6rem] max-w-[800px] bg-white",children:"هیچ پستی وجود ندارد"}),Le=({targetUser:t})=>{const[s,i]=d.useState("دنبال کردن"),n=v(c=>c.ui).loginUser;d.useEffect(()=>{const c=t[0]&&n[0]&&`https://saeedwebdev.ir/api/friends/f/${n[0].id}=${t[0].id}`;async function r(){const a=t[0]&&n[0]&&await ne(c);a[0]&&a[0].friend_id==t[0].id&&i("دنبال شده")}r()},[]);const x=()=>{const c="https://saeedwebdev.ir/api/friends",r=n[0]&&n[0].id,a=t[0]&&t[0].id;async function u(){(await re(c,r,a))[0]&&i("دنبال شده")}u()},p=()=>{const c=`https://saeedwebdev.ir/api/friends/${t[0]&&t[0].id}`;async function r(){await ce(c)&&i("دنبال کردن")}r()};return e.jsx("button",{onClick:s=="دنبال کردن"?x:p,className:"flex items-center justify-center min-w-max font-medium md:px-2 px-[.4rem] pt-1 pb-2 md:text-[.8rem] text-[.8rem] rounded-[.4rem] cursor-pointer bg-green-500 hover:bg-green-600 text-white",children:s})};export{Le as F,Se as N,Fe as P,Ne as a};
