import{r as i,j as s,z as h,aT as cs,aU as ps,aV as vs,_ as d,C as u,D as x,E as f,F as m,G as b,H as S,I as j,J as N,K as w,N as y,O as P,P as F,Q as M,S as $,U as E,V as C,W as L,X as B,Y as k,Z as R,$ as A,a0 as G,a1 as H,a2 as I,a3 as O,a4 as T,a5 as V,a6 as D,a7 as W,a8 as X,a9 as q,aa as z,ab as J,ac as K,ad as Q,ae as Y,af as Z,ag as U,ah as ss,ai as as,aj as es,ak as ts,al as ns,i as _,g as ls,u as os,aE as gs,aF as _s,aG as hs,aW as ds,au as us,av as xs,aX as fs}from"./index-rh96lnhm.js";import{G as ms,H as bs}from"./index.esm-JewEfPaj.js";import{c as Ss}from"./index.esm-Dotkj72i.js";const js=({targetUser:a})=>{const[e,n]=i.useState(null);return i.useEffect(()=>{function r(){const t=new URL(Object.assign({"../../../../assets/avatar/1700021175455-Screenshot (3).png":d,"../../../../assets/avatar/1700021380995-laptopP1.png":u,"../../../../assets/avatar/1700022766143-Screenshot (1).png":x,"../../../../assets/avatar/1700026203021-laptopP1.png":f,"../../../../assets/avatar/1700026672914-Screenshot (3).png":m,"../../../../assets/avatar/1700026718463-Screenshot (5).png":b,"../../../../assets/avatar/1700026730172-Screenshot (4).png":S,"../../../../assets/avatar/1700026739207-Screenshot (6).png":j,"../../../../assets/avatar/1700026851107-Screenshot (4).png":N,"../../../../assets/avatar/1700026900991-Screenshot (5).png":w,"../../../../assets/avatar/1700027014952-Screenshot (6).png":y,"../../../../assets/avatar/1700027098382-Screenshot (5).png":P,"../../../../assets/avatar/1700027241065-Screenshot (3).png":F,"../../../../assets/avatar/1700027368448-Favion.png":M,"../../../../assets/avatar/1700027406405-laptopP1.png":$,"../../../../assets/avatar/1700027419360-Favivon.png":E,"../../../../assets/avatar/1700027464646-bodyForm.png":C,"../../../../assets/avatar/1700027554968-laptopP1.png":L,"../../../../assets/avatar/1700027691969-Screenshot (3).png":B,"../../../../assets/avatar/1700027773846-Favion.png":k,"../../../../assets/avatar/1700027884185-Screenshot (5).png":R,"../../../../assets/avatar/1700027930931-laptopP1.png":A,"../../../../assets/avatar/1700027974019-Screenshot (6).png":G,"../../../../assets/avatar/1700027994400-Screenshot (5).png":H,"../../../../assets/avatar/1700028071397-laptopP1.png":I,"../../../../assets/avatar/1700028097989-bodySign.png":O,"../../../../assets/avatar/1700028183435-Screenshot (5).png":T,"../../../../assets/avatar/1700028191265-Screenshot (3).png":V,"../../../../assets/avatar/1700028279413-Favion.png":D,"../../../../assets/avatar/1700028317628-Screenshot (3).png":W,"../../../../assets/avatar/1700028419543-laptopP1.png":X,"../../../../assets/avatar/1700028513423-Screenshot (6).png":q,"../../../../assets/avatar/1700028652992-Favivon.png":z,"../../../../assets/avatar/1700028867853-laptopP1.png":J,"../../../../assets/avatar/1700028960535-Screenshot (5).png":K,"../../../../assets/avatar/1700028975192-perresume.png":Q,"../../../../assets/avatar/1700029004313-Screenshot (20).png":Y,"../../../../assets/avatar/1700029375605-laptopP1.png":Z,"../../../../assets/avatar/1700029411873-Screenshot (6).png":U,"../../../../assets/avatar/1700029865432-laptopP1.png":ss,"../../../../assets/avatar/1700040216132-Screenshot (76).png":as,"../../../../assets/avatar/1700040248940-Screenshot (36).png":es,"../../../../assets/avatar/1700283463526-Screenshot (46).png":ts,"../../../../assets/avatar/1700283571206-bodyCard.png":ns})[`../../../../assets/avatar/${a&&a[0].avatar}`],import.meta.url).href,p=t.split("/").length,l=t.split("/")[p-1];l!=="undefined"&&n(t),l=="undefined"&&n(null)}r()},[a]),s.jsxs("div",{className:"sticky top-0 flex items-center justify-between w-full min-h-[75px] xl:px-8 md:px-4 px-2 bg-white",children:[s.jsxs("div",{className:"flex items-center w-full gap-3",children:[s.jsx("div",{className:"w-[50px] h-[50px]",children:s.jsx("img",{src:e||h,alt:"",className:"w-full h-full rounded-full"})}),s.jsx("span",{className:"-mt-1",children:a&&a[0].firstName+" "+a[0].lastName})]}),s.jsxs("div",{className:"flex gap-4 text-3xl",children:[s.jsx("i",{children:s.jsx(cs,{})}),s.jsx("i",{children:s.jsx(ps,{})}),s.jsx("i",{children:s.jsx(vs,{})})]})]})},Ns=({message:a,loginUser:e,targetUser:n,avatar:r})=>s.jsxs("div",{className:`flex ${a.user_id==e[0].id?"justify-end":"justify-start gap-2"} min-w-max`,children:[a.user_id!==e[0].id?s.jsx("div",{className:"w-[40px] h-[40px] ",children:s.jsx("img",{src:r||h,alt:"",className:"object-cover h-full w-full rounded-full"})}):s.jsx(s.Fragment,{}),s.jsxs("p",{className:`relative max-w-[22rem] px-3 py-2 rounded-[1.5rem] break-words ${a.user_id==(e[0]&&e[0].id)&&e[0].id?"bg-blue-700 text-left text-white":"bg-gray-300"}`,children:[a.user_id==e[0].id&&s.jsx("span",{className:"absolute right-3 -top-4 min-w-max text-black text-[.7rem]",children:e[0]&&e[0].firstName+" "+e[0].lastName}),a.user_id!==e[0].id&&s.jsx("span",{className:"absolute right-3 -top-4 min-w-max text-black text-[.7rem]",children:n[0]&&n[0].firstName+" "+n[0].lastName}),a.text]})]}),ws=({targetUser:a,avatar:e})=>s.jsxs("div",{className:"flex flex-col items-center w-full h-full pt-10 gap-2",children:[s.jsx("div",{className:"w-28 h-28",children:s.jsx("img",{src:e||h,alt:"",className:"w-full h-full object-cover rounded-full"})}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("span",{className:"flex justify-center",children:a&&a[0].firstName+" "+a[0].lastName}),s.jsx("a",{href:`/sma/profile/${a&&a[0].id}`,className:"flex py-2 px-4 bg-bg-hover rounded-[.5rem]",children:"View Profile"})]})]}),ys=({targetUser:a,loginUser:e})=>{const r=_(l=>l.ui).allMessages,[t,p]=i.useState(null);return i.useEffect(()=>{function l(){const v=new URL(Object.assign({"../../../../assets/avatar/1700021175455-Screenshot (3).png":d,"../../../../assets/avatar/1700021380995-laptopP1.png":u,"../../../../assets/avatar/1700022766143-Screenshot (1).png":x,"../../../../assets/avatar/1700026203021-laptopP1.png":f,"../../../../assets/avatar/1700026672914-Screenshot (3).png":m,"../../../../assets/avatar/1700026718463-Screenshot (5).png":b,"../../../../assets/avatar/1700026730172-Screenshot (4).png":S,"../../../../assets/avatar/1700026739207-Screenshot (6).png":j,"../../../../assets/avatar/1700026851107-Screenshot (4).png":N,"../../../../assets/avatar/1700026900991-Screenshot (5).png":w,"../../../../assets/avatar/1700027014952-Screenshot (6).png":y,"../../../../assets/avatar/1700027098382-Screenshot (5).png":P,"../../../../assets/avatar/1700027241065-Screenshot (3).png":F,"../../../../assets/avatar/1700027368448-Favion.png":M,"../../../../assets/avatar/1700027406405-laptopP1.png":$,"../../../../assets/avatar/1700027419360-Favivon.png":E,"../../../../assets/avatar/1700027464646-bodyForm.png":C,"../../../../assets/avatar/1700027554968-laptopP1.png":L,"../../../../assets/avatar/1700027691969-Screenshot (3).png":B,"../../../../assets/avatar/1700027773846-Favion.png":k,"../../../../assets/avatar/1700027884185-Screenshot (5).png":R,"../../../../assets/avatar/1700027930931-laptopP1.png":A,"../../../../assets/avatar/1700027974019-Screenshot (6).png":G,"../../../../assets/avatar/1700027994400-Screenshot (5).png":H,"../../../../assets/avatar/1700028071397-laptopP1.png":I,"../../../../assets/avatar/1700028097989-bodySign.png":O,"../../../../assets/avatar/1700028183435-Screenshot (5).png":T,"../../../../assets/avatar/1700028191265-Screenshot (3).png":V,"../../../../assets/avatar/1700028279413-Favion.png":D,"../../../../assets/avatar/1700028317628-Screenshot (3).png":W,"../../../../assets/avatar/1700028419543-laptopP1.png":X,"../../../../assets/avatar/1700028513423-Screenshot (6).png":q,"../../../../assets/avatar/1700028652992-Favivon.png":z,"../../../../assets/avatar/1700028867853-laptopP1.png":J,"../../../../assets/avatar/1700028960535-Screenshot (5).png":K,"../../../../assets/avatar/1700028975192-perresume.png":Q,"../../../../assets/avatar/1700029004313-Screenshot (20).png":Y,"../../../../assets/avatar/1700029375605-laptopP1.png":Z,"../../../../assets/avatar/1700029411873-Screenshot (6).png":U,"../../../../assets/avatar/1700029865432-laptopP1.png":ss,"../../../../assets/avatar/1700040216132-Screenshot (76).png":as,"../../../../assets/avatar/1700040248940-Screenshot (36).png":es,"../../../../assets/avatar/1700283463526-Screenshot (46).png":ts,"../../../../assets/avatar/1700283571206-bodyCard.png":ns})[`../../../../assets/avatar/${a&&a[0].avatar}`],import.meta.url).href,o=v.split("/").length,c=v.split("/")[o-1];c!=="undefined"&&p(v),c=="undefined"&&p(null)}l()},[a]),s.jsx("div",{className:"flex flex-col w-full gap-4 pt-4 pb-56",children:r[0]?r.map(l=>s.jsx(Ns,{message:l,loginUser:e,targetUser:a,avatar:t})):s.jsx(ws,{targetUser:a,avatar:t})})},Ps=a=>ls.get(a).then(({data:e})=>e).catch(e=>{console.log(e)}),Fs=(a,e,n,r)=>ls.post(a,{user_id:e,targetUser_id:n,text:r}).then(({data:t})=>t).catch(t=>{console.log(t)}),Ms=({targetUser:a})=>{const e=i.useRef(),[n,r]=i.useState(""),t=os(),l=_(o=>o.ui).loginUser,v=o=>{o.preventDefault(),r("");const c=e.current.text.value,g="https://saeedwebdev.ir/api/messages";async function is(){const rs=a[0]&&l[0]&&await Fs(g,l[0].id,a[0].id,c);rs&&t(ds(rs))}is()};return s.jsxs("form",{onSubmit:o=>v(o),ref:e,className:"relative flex items-center justify-center border-[2px] w-full h-11 rounded-full",children:[s.jsx("input",{onChange:o=>r(o.target.value),value:n,type:"text",name:"text",placeholder:"پیام ...",className:"h-full w-full rounded-full px-12"}),n?s.jsxs("div",{className:"absolute right-3 text-[1.5rem] text-blue-600",children:[s.jsx("label",{htmlFor:"submit",children:s.jsx(gs,{})}),s.jsx("input",{type:"submit",id:"submit",className:"hidden"})]}):s.jsx("i",{className:"absolute right-3 text-[1.5rem]",children:s.jsx(_s,{})}),s.jsxs("div",{className:"absolute left-6 flex text-[1.5rem] gap-4",children:[s.jsx("i",{children:s.jsx(hs,{})}),s.jsx("i",{children:s.jsx(ms,{})})]})]})},$s=({targetUser:a,loginUser:e})=>s.jsxs("div",{className:"flex flex-col justify-between h-full xl:px-8 md:px-4 px-2",children:[s.jsx("div",{className:"flex h-full overflow-y-scroll",children:s.jsx(ys,{targetUser:a,loginUser:e})}),s.jsx("div",{className:"sticky md:bottom-0 bottom-[60px] flex items-center justify-center h-fit bg-bg-theme-body py-3",children:s.jsx(Ms,{targetUser:a})})]}),Es=({targetUser:a,loginUser:e})=>s.jsxs("div",{className:"flex flex-col w-full h-full",children:[s.jsx(js,{targetUser:a}),s.jsx($s,{targetUser:a,loginUser:e})]}),Cs=()=>{const e=_(n=>n.ui).loginUser;return s.jsxs("div",{className:"sticky top-0 flex flex-col items-center w-full bg-white",children:[s.jsxs("div",{className:"flex justify-between w-full px-6 pt-6 pb-4",children:[s.jsx("a",{href:"",children:e[0]&&e[0].firstName+" "+e[0].lastName}),s.jsx("i",{className:"text-2xl",children:s.jsx(Ss,{})})]}),s.jsxs("div",{className:"flex justify-between w-full px-6 py-2",children:[s.jsx("span",{children:"Messages"}),s.jsx("a",{href:"",children:"Requests"})]})]})},Ls=({user:a})=>{const[e,n]=i.useState(null);return i.useEffect(()=>{function r(){const t=new URL(Object.assign({"../../../../assets/avatar/1700021175455-Screenshot (3).png":d,"../../../../assets/avatar/1700021380995-laptopP1.png":u,"../../../../assets/avatar/1700022766143-Screenshot (1).png":x,"../../../../assets/avatar/1700026203021-laptopP1.png":f,"../../../../assets/avatar/1700026672914-Screenshot (3).png":m,"../../../../assets/avatar/1700026718463-Screenshot (5).png":b,"../../../../assets/avatar/1700026730172-Screenshot (4).png":S,"../../../../assets/avatar/1700026739207-Screenshot (6).png":j,"../../../../assets/avatar/1700026851107-Screenshot (4).png":N,"../../../../assets/avatar/1700026900991-Screenshot (5).png":w,"../../../../assets/avatar/1700027014952-Screenshot (6).png":y,"../../../../assets/avatar/1700027098382-Screenshot (5).png":P,"../../../../assets/avatar/1700027241065-Screenshot (3).png":F,"../../../../assets/avatar/1700027368448-Favion.png":M,"../../../../assets/avatar/1700027406405-laptopP1.png":$,"../../../../assets/avatar/1700027419360-Favivon.png":E,"../../../../assets/avatar/1700027464646-bodyForm.png":C,"../../../../assets/avatar/1700027554968-laptopP1.png":L,"../../../../assets/avatar/1700027691969-Screenshot (3).png":B,"../../../../assets/avatar/1700027773846-Favion.png":k,"../../../../assets/avatar/1700027884185-Screenshot (5).png":R,"../../../../assets/avatar/1700027930931-laptopP1.png":A,"../../../../assets/avatar/1700027974019-Screenshot (6).png":G,"../../../../assets/avatar/1700027994400-Screenshot (5).png":H,"../../../../assets/avatar/1700028071397-laptopP1.png":I,"../../../../assets/avatar/1700028097989-bodySign.png":O,"../../../../assets/avatar/1700028183435-Screenshot (5).png":T,"../../../../assets/avatar/1700028191265-Screenshot (3).png":V,"../../../../assets/avatar/1700028279413-Favion.png":D,"../../../../assets/avatar/1700028317628-Screenshot (3).png":W,"../../../../assets/avatar/1700028419543-laptopP1.png":X,"../../../../assets/avatar/1700028513423-Screenshot (6).png":q,"../../../../assets/avatar/1700028652992-Favivon.png":z,"../../../../assets/avatar/1700028867853-laptopP1.png":J,"../../../../assets/avatar/1700028960535-Screenshot (5).png":K,"../../../../assets/avatar/1700028975192-perresume.png":Q,"../../../../assets/avatar/1700029004313-Screenshot (20).png":Y,"../../../../assets/avatar/1700029375605-laptopP1.png":Z,"../../../../assets/avatar/1700029411873-Screenshot (6).png":U,"../../../../assets/avatar/1700029865432-laptopP1.png":ss,"../../../../assets/avatar/1700040216132-Screenshot (76).png":as,"../../../../assets/avatar/1700040248940-Screenshot (36).png":es,"../../../../assets/avatar/1700283463526-Screenshot (46).png":ts,"../../../../assets/avatar/1700283571206-bodyCard.png":ns})[`../../../../assets/avatar/${a&&a.avatar}`],import.meta.url).href,p=t.split("/").length,l=t.split("/")[p-1];l!=="undefined"&&n(t),l=="undefined"&&n(null)}r()},[a]),s.jsxs("a",{href:`/sma/chat/${a.id}`,className:"flex items-center py-2 px-6 gap-4 hover:bg-bg-hover",children:[s.jsx("div",{className:"w-14 h-14",children:s.jsx("img",{src:e||h,alt:"",className:"w-full h-full rounded-full"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"-mt-1",children:a&&a.firstName+" "+a.lastName}),s.jsx("small",{children:"هیچ پیامی ارسال نشده است ."})]})]})},Bs=()=>{const a=_(t=>t.ui),e=a.allLoginUsers,n=a.loginUser,r=e&&e.filter(t=>t.id!==n[0].id);return s.jsx("div",{className:"overflow-y-scroll",children:r.map(t=>s.jsx(Ls,{user:t}))})},ks=()=>s.jsxs("div",{className:"lg:flex hidden flex-col min-w-[360px] border-l-[1px] bg-white",children:[s.jsx(Cs,{}),s.jsx(Bs,{})]}),Rs=()=>{const a=os(),[e,n]=i.useState(),t=_(o=>o.ui).loginUser,l=window.location.href.split("/"),v=l[l.length-1];return i.useEffect(()=>{async function o(){const c=`https://saeedwebdev.ir/api/users/${v}`,g=await us(c);g&&(n(g),a(xs(g[0])))}o()},[v]),i.useEffect(()=>{async function o(){const c=e[0]&&t[0]&&await Ps(`https://saeedwebdev.ir/api/messages/${t[0].id}=${e[0].id}`);c&&a(fs(c))}o()},[e]),s.jsxs("section",{className:"flex w-full max-h-screen min-h-screen overflow-hidden",children:[s.jsx(ks,{}),s.jsx(Es,{targetUser:e,loginUser:t})]})},Is=bs(Rs);export{Is as default};
